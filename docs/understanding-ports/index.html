<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/docker-mailserver/blog/rss.xml" title="Docker Mailserver Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docker-mailserver/blog/atom.xml" title="Docker Mailserver Blog Atom Feed"><title data-react-helmet="true">Understanding the ports | Docker Mailserver</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Understanding the ports | Docker Mailserver"><meta data-react-helmet="true" name="description" content="Quick Reference"><meta data-react-helmet="true" property="og:description" content="Quick Reference"><meta data-react-helmet="true" property="og:url" content="https://polarathene.github.io/docker-mailserver/docs/understanding-ports"><link data-react-helmet="true" rel="shortcut icon" href="/docker-mailserver/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://polarathene.github.io/docker-mailserver/docs/understanding-ports"><link rel="stylesheet" href="/docker-mailserver/styles.412d942f.css">
<link rel="preload" href="/docker-mailserver/styles.d864945f.js" as="script">
<link rel="preload" href="/docker-mailserver/runtime~main.f1b5c049.js" as="script">
<link rel="preload" href="/docker-mailserver/main.428bc413.js" as="script">
<link rel="preload" href="/docker-mailserver/1.f37643b9.js" as="script">
<link rel="preload" href="/docker-mailserver/2.156766f6.js" as="script">
<link rel="preload" href="/docker-mailserver/55.abd3ce97.js" as="script">
<link rel="preload" href="/docker-mailserver/56.54fdbbae.js" as="script">
<link rel="preload" href="/docker-mailserver/935f2afb.5d2e2556.js" as="script">
<link rel="preload" href="/docker-mailserver/17896441.06341064.js" as="script">
<link rel="preload" href="/docker-mailserver/1bd52fa3.481689f1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/docker-mailserver/"><img src="/docker-mailserver/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/docker-mailserver/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Docker Mailserver</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docker-mailserver/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/polarathene/docker-mailserver" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docker-mailserver/"><img src="/docker-mailserver/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/docker-mailserver/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Docker Mailserver</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docker-mailserver/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/polarathene/docker-mailserver" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docker-mailserver/docs/">Home</a></li><li class="menu__list-item"><a class="menu__link" href="/docker-mailserver/docs/introduction">An Introduction to Mail Servers</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docker-mailserver/docs/setupsh">Your best friend setup.sh</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">User Management</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/config-accounts">Configure Accounts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/config-aliases">Configure Aliases</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/config-dkim">Configure DKIM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/config-dmarc">Configure DMARC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/config-spf">Configure SPF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/config-autodiscover">Autodiscovery</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docker-mailserver/docs/understanding-ports">Understanding the ports</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docker-mailserver/docs/config-ssl">SSL/TLS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docker-mailserver/docs/config-fail2ban">Configure Fail2Ban</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">When something went wrong</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/debugging">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/faq">FAQ and Tips</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docker-mailserver/docs/config-pop3">Mail delivery with POP3</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/optional-configuration">Optional Configuration</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Maintenance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/update-and-cleanup">Update &amp; Cleanup</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Override the default config of</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/override-dovecot">Override the default config of Dovecot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/override-postfix">Override the default config of Postfix</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/email-sieve">Email filtering with Sieve Filters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/email-fetchmail">Email gathering with fetchmail</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Email forwarding with</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/email-forward-relayhosts">Email forwarding with Relay Hosts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/email-forward-awsses">Email forwarding with AWS SES</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/fulltext-search">Full-text Search</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/kubernetes">Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/ipv6">IPv6</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/faq">FAQ and Tips</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/install-examples">Installation Examples</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docker-mailserver/docs/usecase-forwardonly-ldap-auth">Forward-Only mailserver with LDAP authentication</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Understanding the ports</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="quick-reference"></a>Quick Reference<a class="hash-link" href="#quick-reference" title="Direct link to heading">#</a></h2><p>Prefer Implicit TLS ports, they&#x27;re more secure and if you use a Reverse Proxy, should be less hassle (although it&#x27;s probably wiser to expose these ports directly to <code>docker-mailserver</code>).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="overview-of-email-ports"></a>Overview of email ports<a class="hash-link" href="#overview-of-email-ports" title="Direct link to heading">#</a></h2><table><thead><tr><th>Protocol</th><th>Explicit TLS<sup>1</sup></th><th>Implicit TLS</th><th>Purpose</th></tr></thead><tbody><tr><td>SMTP</td><td>25</td><td>N/A</td><td>Transfer<sup>2</sup></td></tr><tr><td>ESMTP</td><td>587</td><td>465<sup>3</sup></td><td>Submission</td></tr><tr><td>POP3</td><td>110</td><td>995</td><td>Retrieval</td></tr><tr><td>IMAP4</td><td>143</td><td>993</td><td>Retrieval</td></tr></tbody></table><ol><li>A connection <em>may</em> be secured over TLS when both ends support <code>STARTTLS</code>. On ports 110, 143 and 587, <code>docker-mailserver</code> will reject a connection that cannot be secured. Port 25 is <a href="https://serverfault.com/questions/623692/is-it-still-wrong-to-require-starttls-on-incoming-smtp-messages" target="_blank" rel="noopener noreferrer">required</a> to support insecure connections.</li><li>Receives email, <code>docker-mailserver</code> additionally filters for spam and viruses. For submitting email to the server to be sent to third-parties, you should prefer the <em>submission</em> ports(465, 587) - which require authentication. Unless a relay host is configured(eg SendGrid), outgoing email will leave the server via port 25(thus outbound traffic must not be blocked by your provider or firewall).</li><li>A <em>submission</em> port since 2018 (<a href="https://tools.ietf.org/html/rfc8314" target="_blank" rel="noopener noreferrer">RFC 8314</a>). Previously a secure variant of port 25.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="what-ports-should-i-use-smtp"></a>What ports should I use? (SMTP)<a class="hash-link" href="#what-ports-should-i-use-smtp" title="Direct link to heading">#</a></h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4gICAgc3ViZ3JhcGggeW91ci1zZXJ2ZXIgW1wiWW91ciBTZXJ2ZXJcIl1cbiAgICAgICAgaW5fMjUoMjUpIC0tPiBzZXJ2ZXJcbiAgICAgICAgaW5fNDY1KDQ2NSkgLS0-IHNlcnZlclxuICAgICAgICBzZXJ2ZXIoKFwiZG9ja2VyLW1haWxzZXJ2ZXI8YnIvPmhlbGxvQHdvcmxkLmNvbVwiKSlcbiAgICAgICAgc2VydmVyIC0tLSBvdXRfMjUoMjUpXG4gICAgICAgIHNlcnZlciAtLS0gb3V0XzQ2NSg0NjUpXG4gICAgZW5kXG5cbiAgICB0aGlyZC1wYXJ0eShcIlRoaXJkLXBhcnR5PGJyLz4oc2VuZGluZyB5b3UgZW1haWwpXCIpIC0tLXxcIlJlY2VpdmUgZW1haWwgZm9yPGJyLz5oZWxsb0B3b3JsZC5jb21cInwgaW5fMjVcblxuICAgIHN1YmdyYXBoIGNsaWVudHMgW1wiQ2xpZW50cyAoTVVBKVwiXVxuICAgICAgICBtdWEtY2xpZW50KFRodW5kZXJiaXJkLDxici8-V2VibWFpbCw8YnIvPk11dHQsPGJyLz5ldGMpXG4gICAgICAgIG11YS1zZXJ2aWNlKEJhY2tlbmQgc29mdHdhcmU8YnIvPm9uIGFub3RoZXIgc2VydmVyKVxuICAgIGVuZFxuICAgIGNsaWVudHMgLS0tfFwiU2VuZCBlbWFpbCBhczxici8-aGVsbG9Ad29ybGQuY29tXCJ8IGluXzQ2NVxuXG4gICAgb3V0XzI1KDI1KSAtLT58XCJEaXJlY3Q8YnIvPkRlbGl2ZXJ5XCJ8IHRpbl8yNVxuICAgIG91dF80NjUoNDY1KSAtLT4gcmVsYXkoXCJNVEE8YnIvPlJlbGF5IFNlcnZlclwiKSAtLT4gdGluXzI1KDI1KVxuXG4gICAgc3ViZ3JhcGggdGhpcmQtcGFydHktc2VydmVyW1wiVGhpcmQtcGFydHkgU2VydmVyXCJdXG4gICAgICAgIHRoaXJkLXBhcnR5LW10YShcIk1UQTxici8-ZnJpZW5kQGV4YW1wbGUuY29tXCIpXG4gICAgICAgIHRpbl8yNSgyNSkgLS0-IHRoaXJkLXBhcnR5LW10YVxuICAgIGVuZCIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9" target="_blank" rel="noopener noreferrer"><img src="https://mermaid.ink/img/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4gICAgc3ViZ3JhcGggeW91ci1zZXJ2ZXIgW1wiWW91ciBTZXJ2ZXJcIl1cbiAgICAgICAgaW5fMjUoMjUpIC0tPiBzZXJ2ZXJcbiAgICAgICAgaW5fNDY1KDQ2NSkgLS0-IHNlcnZlclxuICAgICAgICBzZXJ2ZXIoKFwiZG9ja2VyLW1haWxzZXJ2ZXI8YnIvPmhlbGxvQHdvcmxkLmNvbVwiKSlcbiAgICAgICAgc2VydmVyIC0tLSBvdXRfMjUoMjUpXG4gICAgICAgIHNlcnZlciAtLS0gb3V0XzQ2NSg0NjUpXG4gICAgZW5kXG5cbiAgICB0aGlyZC1wYXJ0eShcIlRoaXJkLXBhcnR5PGJyLz4oc2VuZGluZyB5b3UgZW1haWwpXCIpIC0tLXxcIlJlY2VpdmUgZW1haWwgZm9yPGJyLz5oZWxsb0B3b3JsZC5jb21cInwgaW5fMjVcblxuICAgIHN1YmdyYXBoIGNsaWVudHMgW1wiQ2xpZW50cyAoTVVBKVwiXVxuICAgICAgICBtdWEtY2xpZW50KFRodW5kZXJiaXJkLDxici8-V2VibWFpbCw8YnIvPk11dHQsPGJyLz5ldGMpXG4gICAgICAgIG11YS1zZXJ2aWNlKEJhY2tlbmQgc29mdHdhcmU8YnIvPm9uIGFub3RoZXIgc2VydmVyKVxuICAgIGVuZFxuICAgIGNsaWVudHMgLS0tfFwiU2VuZCBlbWFpbCBhczxici8-aGVsbG9Ad29ybGQuY29tXCJ8IGluXzQ2NVxuXG4gICAgb3V0XzI1KDI1KSAtLT58XCJEaXJlY3Q8YnIvPkRlbGl2ZXJ5XCJ8IHRpbl8yNVxuICAgIG91dF80NjUoNDY1KSAtLT4gcmVsYXkoXCJNVEE8YnIvPlJlbGF5IFNlcnZlclwiKSAtLT4gdGluXzI1KDI1KVxuXG4gICAgc3ViZ3JhcGggdGhpcmQtcGFydHktc2VydmVyW1wiVGhpcmQtcGFydHkgU2VydmVyXCJdXG4gICAgICAgIHRoaXJkLXBhcnR5LW10YShcIk1UQTxici8-ZnJpZW5kQGV4YW1wbGUuY29tXCIpXG4gICAgICAgIHRpbl8yNSgyNSkgLS0-IHRoaXJkLXBhcnR5LW10YVxuICAgIGVuZCIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9" alt="Best Practice - Ports (SMTP)"></a></p><details><summary>Flowchart - Mermaid.js source:</summary><p>View in the <a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4gICAgc3ViZ3JhcGggeW91ci1zZXJ2ZXIgW1wiWW91ciBTZXJ2ZXJcIl1cbiAgICAgICAgaW5fMjUoMjUpIC0tPiBzZXJ2ZXJcbiAgICAgICAgaW5fNDY1KDQ2NSkgLS0-IHNlcnZlclxuICAgICAgICBzZXJ2ZXIoKFwiZG9ja2VyLW1haWxzZXJ2ZXI8YnIvPmhlbGxvQHdvcmxkLmNvbVwiKSlcbiAgICAgICAgc2VydmVyIC0tLSBvdXRfMjUoMjUpXG4gICAgICAgIHNlcnZlciAtLS0gb3V0XzQ2NSg0NjUpXG4gICAgZW5kXG5cbiAgICB0aGlyZC1wYXJ0eShcIlRoaXJkLXBhcnR5PGJyLz4oc2VuZGluZyB5b3UgZW1haWwpXCIpIC0tLXxcIlJlY2VpdmUgZW1haWwgZm9yPGJyLz5oZWxsb0B3b3JsZC5jb21cInwgaW5fMjVcblxuICAgIHN1YmdyYXBoIGNsaWVudHMgW1wiQ2xpZW50cyAoTVVBKVwiXVxuICAgICAgICBtdWEtY2xpZW50KFRodW5kZXJiaXJkLDxici8-V2VibWFpbCw8YnIvPk11dHQsPGJyLz5ldGMpXG4gICAgICAgIG11YS1zZXJ2aWNlKEJhY2tlbmQgc29mdHdhcmU8YnIvPm9uIGFub3RoZXIgc2VydmVyKVxuICAgIGVuZFxuICAgIGNsaWVudHMgLS0tfFwiU2VuZCBlbWFpbCBhczxici8-aGVsbG9Ad29ybGQuY29tXCJ8IGluXzQ2NVxuXG4gICAgb3V0XzI1KDI1KSAtLT58XCJEaXJlY3Q8YnIvPkRlbGl2ZXJ5XCJ8IHRpbl8yNVxuICAgIG91dF80NjUoNDY1KSAtLT4gcmVsYXkoXCJNVEE8YnIvPlJlbGF5IFNlcnZlclwiKSAtLT4gdGluXzI1KDI1KVxuXG4gICAgc3ViZ3JhcGggdGhpcmQtcGFydHktc2VydmVyW1wiVGhpcmQtcGFydHkgU2VydmVyXCJdXG4gICAgICAgIHRoaXJkLXBhcnR5LW10YShcIk1UQTxici8-ZnJpZW5kQGV4YW1wbGUuY29tXCIpXG4gICAgICAgIHRpbl8yNSgyNSkgLS0-IHRoaXJkLXBhcnR5LW10YVxuICAgIGVuZCIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9" target="_blank" rel="noopener noreferrer">Live Editor</a>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">flowchart LR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    subgraph your-server [&quot;Your Server&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        in_25(25) --&gt; server</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        in_465(465) --&gt; server</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        server((&quot;docker-mailserver&lt;br/&gt;hello@world.com&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        server --- out_25(25)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        server --- out_465(465)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    third-party(&quot;Third-party&lt;br/&gt;(sending you email)&quot;) ---|&quot;Receive email for&lt;br/&gt;hello@world.com&quot;| in_25</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    subgraph clients [&quot;Clients (MUA)&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        mua-client(Thunderbird,&lt;br/&gt;Webmail,&lt;br/&gt;Mutt,&lt;br/&gt;etc)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        mua-service(Backend software&lt;br/&gt;on another server)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    clients ---|&quot;Send email as&lt;br/&gt;hello@world.com&quot;| in_465</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    out_25(25) --&gt;|&quot;Direct&lt;br/&gt;Delivery&quot;| tin_25</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    out_465(465) --&gt; relay(&quot;MTA&lt;br/&gt;Relay Server&quot;) --&gt; tin_25(25)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    subgraph third-party-server[&quot;Third-party Server&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        third-party-mta(&quot;MTA&lt;br/&gt;friend@example.com&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        tin_25(25) --&gt; third-party-mta</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><hr></details><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="inbound-traffic-on-the-left"></a>Inbound Traffic (On the left):<a class="hash-link" href="#inbound-traffic-on-the-left" title="Direct link to heading">#</a></h4><ul><li><strong>Port 25:</strong> Think of this like a physical mailbox, it is open to receive email from anyone who wants to. <code>docker-mailserver</code> will actively filter email delivered on this port for spam or viruses and refuse mail from known bad sources. While you could also use this port internally to send email outbound without requiring authentication, you really should prefer the <em>Submission</em> ports(587, 465).</li><li><strong>Port 465(<em>and 587</em>):</strong> This is the equivalent of a post office box where you would send email to be delivered on your behalf(<code>docker-mailserver</code> is that metaphorical post office, aka the MTA). Unlike port 25, these two ports are known as the <em>Submission</em> ports and require a valid email account on the server with a password to be able to send email to anyone outside of the server(an MTA you do not control, eg Outlook or Gmail). Prefer port 465 which provides Implicit TLS.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="outbound-traffic-on-the-right"></a>Outbound Traffic (On the Right):<a class="hash-link" href="#outbound-traffic-on-the-right" title="Direct link to heading">#</a></h4><ul><li><p><strong>Port 25:</strong> Send the email directly to the given email address MTA as possible. Like your own <code>docker-mailserver</code> port 25, this is the standard port for receiving email on, thus email will almost always arrive to the final MTA on this port. Note that, there may be additional MTAs further in the chain, but this would be the public facing one representing that email address.</p></li><li><p><strong>Port 465(<em>and 587</em>):</strong> SMTP Relays are a popular choice to hand-off delivery of email through. Services like SendGrid are useful for bulk email(marketing) or when your webhost or ISP are preventing you from using standard ports like port 25 to send out email(which can be abused by spammers). </p><p><code>docker-mailserver</code> can serve as a relay too, but the difference between a DIY relay and a professional service is reputation, which is referenced by MTAs you&#x27;re delivering to such as Outlook, Gmail or others(perhaps another <code>docker-mailserver</code> server!), when deciding if email should be marked as junked or potentially not delivered at all. As a service like SendGrid has a reputation to maintain, relay is restricted to registered users who must authenticate(even on port 25), they do not store email, merely forward it to another MTA which could be delivered on a different port like 25.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="explicit-vs-implicit-tls"></a>Explicit vs Implicit TLS<a class="hash-link" href="#explicit-vs-implicit-tls" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="explicit-tls-aka-opportunistic-tls---opt-in-encryption"></a>Explicit TLS (aka Opportunistic TLS) - Opt-in Encryption<a class="hash-link" href="#explicit-tls-aka-opportunistic-tls---opt-in-encryption" title="Direct link to heading">#</a></h4><p>Communication on these ports begin in <a href="https://www.denimgroup.com/resources/blog/2007/10/cleartext-vs-pl/" target="_blank" rel="noopener noreferrer">cleartext</a>, indicating support for <code>STARTTLS</code>. If both client and server support <code>STARTTLS</code> the connection will be secured over TLS, otherwise no encryption will be used.</p><p>Support for <code>STARTTLS</code> is not always implemented correctly, which can lead to leaking credentials(client sending too early) prior to a TLS connection being established. Third-parties such as some ISPs have also been known to intercept the <code>STARTTLS</code> exchange, modifying network traffic to prevent establishing a secure connection.</p><p>Due to these security concerns, <a href="https://tools.ietf.org/html/rfc8314#section-4.1" target="_blank" rel="noopener noreferrer">RFC 8314 (Section 4.1)</a> encourages you to <strong>prefer Implicit TLS ports where possible</strong>. </p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="implicit-tls---enforced-encryption"></a>Implicit TLS - Enforced Encryption<a class="hash-link" href="#implicit-tls---enforced-encryption" title="Direct link to heading">#</a></h4><p>Communication is always encrypted, avoiding the above mentioned issues with Explicit TLS.</p><p>You may know of these ports as <strong>SMTPS, POP3S, IMAPS</strong>, which indicate the protocol in combination with a TLS connection. However, Explicit TLS ports provide the same benefit when <code>STARTTLS</code> is successfully negotiated; Implicit TLS better communicates the improved security to all three protocols (SMTP/POP3/IMAP over Implicit TLS). </p><p>Additionally, referring to port 465 as <em>SMTPS</em> would be incorrect, as it is a submissions port requiring authentication to proceed via <em>ESMTP</em>, whereas ESMTPS has a different meaning(STARTTLS supported). Port 25 may lack Implicit TLS, but can be configured to be more secure between trusted parties via MTA-STS, STARTTLS Policy List, DNSSEC and DANE.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="security"></a>Security<a class="hash-link" href="#security" title="Direct link to heading">#</a></h2><p><strong>TODO:</strong> <em>This section should provide any related configuration advice, and probably expand on and link to resources about DANE, DNSSEC, MTA-STS and STARTTLS Policy list, with advice on how to configure/setup these added security layers.</em></p><p><strong>TODO:</strong> <em>A related section or page on ciphers used may be useful, although less important for users to be concerned about.</em></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tls-connections-on-mail-servers-compared-to-web-browsers"></a>TLS connections on mail servers, compared to web browsers<a class="hash-link" href="#tls-connections-on-mail-servers-compared-to-web-browsers" title="Direct link to heading">#</a></h3><p>Unlike with HTTP where a web browser client communicates directly with the server providing a website, a secure TLS connection as discussed below is not the equivalent safety that HTTPS provides when the transit of email (receiving or sending) is sent through third-parties, as the secure connection is only between two machines, any additional machines (MTAs) between the MUA and the MDA depends on them establishing secure connections between one another successfully. </p><p>Other machines that facilitate a connection that generally aren&#x27;t taken into account can exist between a client and server, such as those where your connection passes through your ISP provider are capable of compromising a cleartext connection through interception.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/polarathene/docker-mailserver/tree/docs/docusaurus-demo/website/docs/Understanding-the-ports.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docker-mailserver/docs/config-autodiscover"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Autodiscovery</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docker-mailserver/docs/config-ssl"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SSL/TLS Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-reference" class="table-of-contents__link">Quick Reference</a></li><li><a href="#overview-of-email-ports" class="table-of-contents__link">Overview of email ports</a><ul><li><a href="#what-ports-should-i-use-smtp" class="table-of-contents__link">What ports should I use? (SMTP)</a></li><li><a href="#explicit-vs-implicit-tls" class="table-of-contents__link">Explicit vs Implicit TLS</a></li></ul></li><li><a href="#security" class="table-of-contents__link">Security</a><ul><li><a href="#tls-connections-on-mail-servers-compared-to-web-browsers" class="table-of-contents__link">TLS connections on mail servers, compared to web browsers</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docker-mailserver/docs/">Wiki Example</a></li><li class="footer__item"><a class="footer__link-item" href="/docker-mailserver/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docker-mailserver/blog">Releases</a></li><li class="footer__item"><a href="https://github.com/polarathene/docker-mailserver" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 [_Docker Mailserver Organization_](https://github.com/docker-mailserver). This project is licensed under the MIT license. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docker-mailserver/styles.d864945f.js"></script>
<script src="/docker-mailserver/runtime~main.f1b5c049.js"></script>
<script src="/docker-mailserver/main.428bc413.js"></script>
<script src="/docker-mailserver/1.f37643b9.js"></script>
<script src="/docker-mailserver/2.156766f6.js"></script>
<script src="/docker-mailserver/55.abd3ce97.js"></script>
<script src="/docker-mailserver/56.54fdbbae.js"></script>
<script src="/docker-mailserver/935f2afb.5d2e2556.js"></script>
<script src="/docker-mailserver/17896441.06341064.js"></script>
<script src="/docker-mailserver/1bd52fa3.481689f1.js"></script>
</body>
</html>