(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{101:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return i})),r.d(t,"metadata",(function(){return s})),r.d(t,"toc",(function(){return l})),r.d(t,"default",(function(){return p}));var n=r(3),o=r(7),a=(r(0),r(104)),i={id:"email-forward-awsses",title:"Email forwarding with AWS SES"},s={unversionedId:"email-forward-awsses",id:"email-forward-awsses",isDocsHomePage:!1,title:"Email forwarding with AWS SES",description:"Note: new configuration, see Configure Relay Hosts",source:"@site/docs/Configure-AWS-SES.md",slug:"/email-forward-awsses",permalink:"/docker-mailserver/email-forward-awsses",editUrl:"https://github.com/polarathene/docker-mailserver/tree/docs/docusaurus-demo/website/docs/Configure-AWS-SES.md",version:"current",sidebar:"docs",previous:{title:"Email forwarding with Relay Hosts",permalink:"/docker-mailserver/email-forward-relayhosts"},next:{title:"Full-text Search",permalink:"/docker-mailserver/fulltext-search"}},l=[],c={toc:l};function p(e){var t=e.components,r=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(n.a)({},c,r,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Note: new configuration, see ",Object(a.b)("a",{parentName:"p",href:"https://github.com/tomav/docker-mailserver/wiki/Configure-Relay-Hosts"},"Configure Relay Hosts")),Object(a.b)("p",null,"Instead of letting postfix deliver mail directly it is possible to configure it to deliver outgoing email via Amazon SES (Simple Email Service). (Receiving inbound email via SES is not implemented.) The configuration follows the guidelines provided by AWS in ",Object(a.b)("a",{parentName:"p",href:"http://docs.aws.amazon.com/ses/latest/DeveloperGuide/postfix.html"},"http://docs.aws.amazon.com/ses/latest/DeveloperGuide/postfix.html"),", specifically, the STARTTLS method."),Object(a.b)("p",null,'As described in the AWS Developer Guide you will have to generate SMTP credentials and define the following two environment variables in the docker-compose.yml with the appropriate values for your AWS SES subscription (the values for AWS_SES_USERPASS are the "SMTP username" and "SMTP password" provided when you create SMTP credentials for SES):'),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"    environment:\n    - AWS_SES_HOST=email-smtp.us-east-1.amazonaws.com\n    - AWS_SES_USERPASS=AKIAXXXXXXXXXXXXXXXX:kqXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n")),Object(a.b)("p",null,"If necessary, you can also provide AWS_SES_PORT. If not provided, it defaults to 25."),Object(a.b)("p",null,"When you start the container you will see a log line as follows confirming the configuration:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"Setting up outgoing email via AWS SES host email-smtp.us-east-1.amazonaws.com\n")),Object(a.b)("p",null,"To verify proper operation, send an email to some external account of yours and inspect the mail headers. You will also see the connection to SES in the mail logs. For example:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"May 23 07:09:36 mail postfix/smtp[692]: Trusted TLS connection established to email-smtp.us-east-1.amazonaws.com[107.20.142.169]:25:\nTLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits)\nMay 23 07:09:36 mail postfix/smtp[692]: 8C82A7E7: to=<someone@example.com>, relay=email-smtp.us-east-1.amazonaws.com[107.20.142.169]:25,\ndelay=0.35, delays=0/0.02/0.13/0.2, dsn=2.0.0, status=sent (250 Ok 01000154dc729264-93fdd7ea-f039-43d6-91ed-653e8547867c-000000)\n\n")))}p.isMDXComponent=!0},104:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return f}));var n=r(0),o=r.n(n);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=o.a.createContext({}),p=function(e){var t=o.a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=p(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(r),d=n,f=u["".concat(i,".").concat(d)]||u[d]||m[d]||a;return r?o.a.createElement(f,s(s({ref:t},c),{},{components:r})):o.a.createElement(f,s({ref:t},c))}));function f(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,i=new Array(a);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var c=2;c<a;c++)i[c]=r[c];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"}}]);