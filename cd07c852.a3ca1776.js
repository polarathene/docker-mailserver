(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{112:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return f}));var o=n(3),i=n(7),a=(n(0),n(125)),r={id:"email-fetchmail",title:"Email gathering with fetchmail"},c={unversionedId:"email-fetchmail",id:"email-fetchmail",isDocsHomePage:!1,title:"Email gathering with fetchmail",description:"To enable the fetchmail service to retrieve e-mails set the environment variable ENABLE_FETCHMAIL to 1. Your docker-compose.yml file should look like following snippet:",source:"@site/docs/Retrieve-emails-from-a-remote-mail-server-(using-builtin-fetchmail).md",slug:"/email-fetchmail",permalink:"/docker-mailserver/docs/email-fetchmail",editUrl:"https://github.com/polarathene/docker-mailserver/tree/docs/docusaurus-demo/website/docs/Retrieve-emails-from-a-remote-mail-server-(using-builtin-fetchmail).md",version:"current",sidebar:"docs",previous:{title:"Email filtering with Sieve Filters",permalink:"/docker-mailserver/docs/email-sieve"},next:{title:"Email forwarding with Relay Hosts",permalink:"/docker-mailserver/docs/email-forward-relayhosts"}},l=[{value:"Example IMAP configuration",id:"example-imap-configuration",children:[]},{value:"Example POP3 configuration",id:"example-pop3-configuration",children:[]},{value:"Polling interval",id:"polling-interval",children:[]}],m={toc:l};function f(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},m,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"To enable the ",Object(a.b)("a",{parentName:"p",href:"http://www.fetchmail.info"},"fetchmail")," service to retrieve e-mails set the environment variable ",Object(a.b)("inlineCode",{parentName:"p"},"ENABLE_FETCHMAIL")," to ",Object(a.b)("inlineCode",{parentName:"p"},"1"),". Your ",Object(a.b)("inlineCode",{parentName:"p"},"docker-compose.yml")," file should look like following snippet:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-yaml"},"...\nenvironment:\n  - ENABLE_FETCHMAIL=1\n  - FETCHMAIL_POLL=300\n...\n")),Object(a.b)("p",null,"Generate a file called ",Object(a.b)("inlineCode",{parentName:"p"},"fetchmail.cf")," and place it in the ",Object(a.b)("inlineCode",{parentName:"p"},"config")," folder. Your ",Object(a.b)("inlineCode",{parentName:"p"},"docker-mailserver")," folder should look like this example:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"\u251c\u2500\u2500 config\n\u2502\xa0\xa0 \u251c\u2500\u2500 dovecot.cf\n\u2502\xa0\xa0 \u251c\u2500\u2500 fetchmail.cf\n\u2502\xa0\xa0 \u251c\u2500\u2500 postfix-accounts.cf\n\u2502\xa0\xa0 \u2514\u2500\u2500 postfix-virtual.cf\n\u251c\u2500\u2500 docker-compose.yml\n\u2514\u2500\u2500 README.md\n")),Object(a.b)("h1",{id:"configuration"},"Configuration"),Object(a.b)("p",null,"A detailed description of the configuration options can be found in the ",Object(a.b)("a",{parentName:"p",href:"http://www.fetchmail.info/fetchmail-man.html"},"online version of the manual page"),"."),Object(a.b)("h2",{id:"example-imap-configuration"},"Example IMAP configuration"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"poll 'imap.example.com' proto imap\n    user 'username'\n    pass 'secret'\n    is 'user1@domain.tld'\n    ssl\n")),Object(a.b)("h2",{id:"example-pop3-configuration"},"Example POP3 configuration"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"poll 'pop3.example.com' proto pop3\n    user 'username'\n    pass 'secret'\n    is 'user2@domain.tld'\n    ssl\n")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"IMPORTANT"),": Don\u2019t forget the last line: e. g. ",Object(a.b)("inlineCode",{parentName:"p"},"is 'user1@domain.tld'"),". After ",Object(a.b)("inlineCode",{parentName:"p"},"is")," you have to specify one email address from the configuration file ",Object(a.b)("inlineCode",{parentName:"p"},"config/postfix-accounts.cf"),". "),Object(a.b)("p",null,"More details how to configure fetchmail can be found in the ",Object(a.b)("a",{parentName:"p",href:"http://www.fetchmail.info/fetchmail-man.html#31"},"fetchmail man page in the chapter \u201cThe run control file\u201d"),"."),Object(a.b)("h2",{id:"polling-interval"},"Polling interval"),Object(a.b)("p",null,"By default the fetchmail service searches every 5 minutes for new mails on your external mail accounts. You can override this default value by changing the ENV variable ",Object(a.b)("inlineCode",{parentName:"p"},"FETCHMAIL_POLL"),"."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-yaml"},"  - FETCHMAIL_POLL=60\n")),Object(a.b)("p",null,"You must specify a numeric argument which is a polling interval in seconds. The example above polls every minute for new mails."),Object(a.b)("h1",{id:"debugging"},"Debugging"),Object(a.b)("p",null,"To debug your ",Object(a.b)("inlineCode",{parentName:"p"},"fetchmail.cf")," configuration run this command:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"./setup.sh debug fetchmail\n")),Object(a.b)("p",null,"For more informations about the configuration script ",Object(a.b)("inlineCode",{parentName:"p"},"setup.sh")," [","[read the corresponding wiki page|Setup-docker-mailserver-using-the-script-setup.sh]","]."),Object(a.b)("p",null,"Here a sample output of ",Object(a.b)("inlineCode",{parentName:"p"},"./setup.sh debug fetchmail"),":"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"fetchmail: 6.3.26 querying outlook.office365.com (protocol POP3) at Mon Aug 29 22:11:09 2016: poll started\nTrying to connect to 132.245.48.18/995...connected.\nfetchmail: Server certificate:\nfetchmail: Issuer Organization: Microsoft Corporation\nfetchmail: Issuer CommonName: Microsoft IT SSL SHA2\nfetchmail: Subject CommonName: outlook.com\nfetchmail: Subject Alternative Name: outlook.com\nfetchmail: Subject Alternative Name: *.outlook.com\nfetchmail: Subject Alternative Name: office365.com\nfetchmail: Subject Alternative Name: *.office365.com\nfetchmail: Subject Alternative Name: *.live.com\nfetchmail: Subject Alternative Name: *.internal.outlook.com\nfetchmail: Subject Alternative Name: *.outlook.office365.com\nfetchmail: Subject Alternative Name: outlook.office.com\nfetchmail: Subject Alternative Name: attachment.outlook.office.net\nfetchmail: Subject Alternative Name: attachment.outlook.officeppe.net\nfetchmail: Subject Alternative Name: *.office.com\nfetchmail: outlook.office365.com key fingerprint: 3A:A4:58:42:56:CD:BD:11:19:5B:CF:1E:85:16:8E:4D\nfetchmail: POP3< +OK The Microsoft Exchange POP3 service is ready. [SABFADEAUABSADAAMQBDAEEAMAAwADAANwAuAGUAdQByAHAAcgBkADAAMQAuAHAAcgBvAGQALgBlAHgAYwBoAGEAbgBnAGUAbABhAGIAcwAuAGMAbwBtAA==]\nfetchmail: POP3> CAPA\nfetchmail: POP3< +OK\nfetchmail: POP3< TOP\nfetchmail: POP3< UIDL\nfetchmail: POP3< SASL PLAIN\nfetchmail: POP3< USER\nfetchmail: POP3< .\nfetchmail: POP3> USER user1@outlook.com\nfetchmail: POP3< +OK\nfetchmail: POP3> PASS *\nfetchmail: POP3< +OK User successfully logged on.\nfetchmail: POP3> STAT\nfetchmail: POP3< +OK 0 0\nfetchmail: No mail for user1@outlook.com at outlook.office365.com\nfetchmail: POP3> QUIT\nfetchmail: POP3< +OK Microsoft Exchange Server 2016 POP3 server signing off.\nfetchmail: 6.3.26 querying outlook.office365.com (protocol POP3) at Mon Aug 29 22:11:11 2016: poll completed\nfetchmail: normal termination, status 1\n")))}f.isMDXComponent=!0},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return b}));var o=n(0),i=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var m=i.a.createContext({}),f=function(e){var t=i.a.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=f(e.components);return i.a.createElement(m.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},s=i.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,r=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=f(n),s=o,b=p["".concat(r,".").concat(s)]||p[s]||u[s]||a;return n?i.a.createElement(b,c(c({ref:t},m),{},{components:n})):i.a.createElement(b,c({ref:t},m))}));function b(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=s;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,r[1]=c;for(var m=2;m<a;m++)r[m]=n[m];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}s.displayName="MDXCreateElement"}}]);